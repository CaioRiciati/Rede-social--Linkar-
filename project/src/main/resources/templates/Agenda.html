<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Agenda</title>
  <link rel="stylesheet" href="/css/Agenda.css"/>
</head>


<body>

	<!-- TOPO -->
	  <header class="topo">
	    <div class="logo">
	      <div class="icone-logo"> <img th:src="@{/images/logo.png}" class="icone-logo2" alt="Ícone Feed"></div>
	      <span>Linkar</span>
	    </div>

	<nav class="navegacao">

	    <a th:href="@{/feed}" class="nav-item">

	      <img th:src="@{/images/casa.png}" class="icone-feed" alt="Ícone Feed">
	      <span>Feed</span>
	    </a>
	    <a th:href="@{/agenda}" class="nav-item ativo">
	      <img th:src="@{/images/agenda.png}" class="icone-agenda" alt="Ícone Agenda">
	      <span>Agenda</span>
	    </a>
	</nav>


	    <div class="icones-topo">
	    <button id="btn-busca" class="btn-icone"> 

	        <img th:src="@{/images/lupa.png}" alt="Ícone busca"> 
	    </button>
	    <button id="btn-sino" class="btn-icone"> 
	        <img th:src="@{/images/sino.png}" alt="Ícone sino"> 
	    </button>
	    <button id="btn-perfil" class="btn-icone"> 
	        <img th:src="@{/images/user_icon.png}" alt="Ícone perfil"> 
	    </button>
	  </div>
	  </header>

  <!-- CONTEÚDO PRINCIPAL -->
  <main class="main-container">
    <!-- CALENDÁRIO (estático por enquanto) -->
    <section class="calendar-section card-item">
      <div class="card calendario-card">
        <h2>Calendário</h2>
        <div class="calendar">
          <div class="calendar-header">
            <button>&lt;</button>
            <span th:text="${#temporals.format(diaSelecionado, 'MMMM yyyy')}"></span>
            <button>&gt;</button>
          </div>

          <!-- Calendário ainda está apenas visual, não dinâmico -->
          <div class="calendar-grid">
            <div>dom</div><div>seg</div><div>ter</div><div>qua</div>
            <div>qui</div><div>sex</div><div>sáb</div>

            <div class="inactive">26</div><div class="inactive">27</div><div class="inactive">28</div>
            <div class="inactive">29</div><div class="inactive">30</div><div class="inactive">31</div><div>1</div>
            <div>2</div><div>3</div><div>4</div><div>5</div>
            <div>6</div><div>7</div><div>8</div>
            <div>9</div><div>10</div><div>11</div><div>12</div>
            <div>13</div><div>14</div><div>15</div>
            <div>16</div><div >17</div><div>18</div><div>19</div>
            <div>20</div><div>21</div><div>22</div>
            <div>23</div><div>24</div><div >25</div><div>26</div>
            <div class="selected">27</div><div>28</div><div >29</div>
			<div>30</div><div class="inactive">01</div><div class="inactive">02</div>
          </div>
        </div>

        <div class="calendar-footer">
          <span class="dot"></span> Dias com tarefas
        </div>
      </div>
    </section>

    <!-- SEÇÃO DE TAREFAS -->
    <section class="task-section card-item">

      <!-- NOVA TAREFA -->
      <div class="card">
        <h2>+ Nova Tarefa</h2>

        <form action="/agenda/nova" method="POST">
          <label>Título</label>
          <input type="text" name="titulo" placeholder="Nome da tarefa" required />

          <label>Descrição</label>
          <textarea name="descricao" placeholder="Detalhes da tarefa..." required></textarea>

          <div class="form-row">
            <div>
              <label>Data</label>
              <input type="date" name="data" th:value="${diaSelecionado}" required />
            </div>

            <div>
              <label>Prioridade</label>
              <select name="prioridade">
                <option th:each="p : ${prioridades}"
                        th:value="${p}"
                        th:text="${p}">
                </option>
              </select>
            </div>
          </div>

          <button type="submit" class="btn-green">Criar Tarefa</button>
        </form>
      </div>

      <!-- LISTA DE TAREFAS -->
      <div class="card2">
        <h3 th:text="'Tarefas para ' + ${#temporals.format(diaSelecionado, 'dd/MM/yyyy')}"></h3>

        <!-- Se estiver vazio -->
        <div th:if="${tarefas.size() == 0}">
          <p class="empty">Nenhuma tarefa para este dia</p>
          <p class="hint">Crie uma nova tarefa acima</p>
        </div>

		<div class="card2">
		  <form method="get" action="/agenda" class="filtro-tarefas">

		    <input type="hidden" name="data" th:value="${diaSelecionado}" />

		    <label>Mostrar:</label>

		    <select name="filtro" onchange="this.form.submit()">
		      <option value="dia" th:selected="${filtro == 'dia'}">Tarefas do dia</option>
		      <option value="todas" th:selected="${filtro == 'todas'}">Todas as tarefas</option>
		    </select>

		  </form>
		</div>
		
		
        <!-- Se tiver tarefas -->
        <ul th:if="${tarefas.size() > 0}">
          <li th:each="t : ${tarefas}">
            <strong th:text="${t.titulo}"></strong>
            (<span th:text="${t.prioridade}"></span>)
            <p th:text="${t.descricao}"></p>

            <a th:href="'/agenda/excluir/' + ${t.id}" class="btn-red">Excluir</a>
            <hr />
          </li>
        </ul>
      </div>

    </section>
  </main>

  <!-- RODAPÉ -->
  <footer class="footer">
    <p>© 2025 Linkar - Todos os direitos reservados | Versão 1.0</p>
  </footer>
</body>
</html>
